{
  "serviceName": "Games landing web ui",

  "terraformResources": [
    {
      "folderName": "dns",
      "description": "Create dns records in route 53 for service and create ACM certificates",

      "outputName": "dns",

      "global": true
    },
    {
      "folderName": "config",
      "description": "Create record in aws parameter store and save DNS address of deployed service",

      "outputName": "config",
      
      "variables": {
        "dns_address": "<tf-outputs:dns.dns_address>"
      },

      "global": true
    },
    {
      "folderName": "s3",
      "description": "Create S3 bucket for application build for current env & feature",

      "outputName": "s3"
    },
    {
      "folderName": "cloudfront",
      "description": "Create distribution for s3 bucket with app build for current env & feature",

      "outputName": "distribution",
      
      "variables": {
        "route53_zone_id": "<tf-outputs:dns.route53_zone_id>",
        "acm_master_certificate_arn": "<tf-outputs:dns.acm_master_certificate_arn>",
        "acm_features_certificate_arn": "<tf-outputs:dns.acm_features_certificate_arn>",
        "s3_bucket_arn": "<tf-outputs:s3.s3_bucket_arn>",
        "s3_bucket_name": "<tf-outputs:s3.s3_bucket_name>",
        "s3_bucket_bucket_domain_name": "<tf-outputs:s3.s3_bucket_bucket_domain_name>"
      }
    }
  ],

  "deployChain": [
    "pnpm run build",
    "aws s3 sync ./dist s3://<tf-outputs:s3.s3_bucket_name> --profile default",
    "aws cloudfront create-invalidation --distribution-id <tf-outputs:distribution.cloudfront_distribtuion_id> --paths '/*' --profile default"
  ]
}